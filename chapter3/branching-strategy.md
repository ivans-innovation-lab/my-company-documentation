# Branching Strategy

There are many git branching strategies out there, such as [git flow](http://nvie.com/posts/a-successful-git-branching-model/) and [git hub flow](http://scottchacon.com/2011/08/31/github-flow.html). I think there is still room for improvement. Git flow is complicated, and not so much in-line with continuous integration. GitHub flow does assume you are able to deploy to production every time you merge a feature branch. This is possible for SaaS applications but there are many cases where this is not possible. One would be a situation where you are not in control of the exact release moment. In these cases you can make a production branch that reflects the deployed code. You can deploy a new version by merging in master to the production branch. If you need to know what code is in production you can just checkout the production branch to see. The approximate time of deployment is easily visible as the merge commit in the version control system. This time is pretty accurate if you automatically deploy your production branch. If you need a more exact time you can have your deployment script create a tag on each deployment. This flow prevents the overhead of releasing, tagging and merging that is common to git flow.

This feature-master-production strategy is known as** **[**gitlab flow**](https://about.gitlab.com/2014/09/29/gitlab-flow)** **and** **we are going to apply it within this lab. Only in case you need to release software to the outside world \(or internally within you company\) you need to work with gitlab [**release branches**](https://docs.gitlab.com/ee/workflow/gitlab_flow.html#release-branches-with-gitlab-flow) flow.

* [Monolithic Deployment Pipeline](/chapter3/monolithic-delivery-pattern.md) is using [gitlab flow](https://about.gitlab.com/2014/09/29/gitlab-flow) \(**feature-master-production**\). Every commit on master branch can be deployed/merged in production. This will enable you to have only one maven version in your pom \(1.0.0-SNAPSHOT\) all the time._ Simple!_
* [Microservices Deployment Pipeline](/chapter3/microservices-delivery-pattern.md) is/will using  [gitlab flow](https://about.gitlab.com/2014/09/29/gitlab-flow) \(**release branches**\). The services are communicating to each other and usually they will be developed with many teams - have to be released to internal teams. In this case you have to version each service in pom file with concrete release version \(1.0.0\). [Maven repository](http://maven.idugalic.pro/) should not allow delete/overwrite of release versions. _Not so simple!_
* Core libraries have to be released to internal teams. This libraries will be used by monolithic application or misroservices. In this case you can use [gitlab flow](https://about.gitlab.com/2014/09/29/gitlab-flow) \(release branches\), or **you can stay with master branch only and tag every release**. _Very Simple !_



